## 1. 项目基本功能概述

本项目是一款面向大众用户的 **AI 塔罗与星座占卜应用**，通过精心设计的交互流程，为用户提供轻量但有情绪价值的占卜咨询体验。  
核心能力包括：

- **塔罗占卜对话**：围绕用户当前困惑，AI 扮演塔罗师角色，引导用户抽牌并进行多轮解读与追问。
- **星座 / 星盘咨询**：支持从“星座知识问答”到“基于本命盘的深度解读”的全链路体验，AI 智能判断何时需要星盘数据。
- **占卜笔记本（长期记忆）**：系统自动为每次有价值的占卜对话生成笔记，以用户第一人称视角记录，构成长期记忆。
- **沉浸式抽牌**：通过高完成度的视觉与动效设计，营造仪式感。

---

## 2. 关键特性
### 个性化解读

1. 为每个用户单独打造的记事本长期记忆，能够记住用户过往的信息，AI能够给出更有参与感和个性化的回答。产生价值：能给出更有情绪价值的回答，产生更强的用户链接。例如后续占卜中，AI 可以主动调用“读取笔记本”的工具，把这些历史线索串起来，形成“我记得你上次也在纠结 xx……”的连续性叙事。  
**产品价值**：让用户感到“被记住”“被理解”，形成情绪依赖。



### 科学的占卜体验

1. 引导式的提问，更自然的输出。很多模型都是面向功能，如解牌，星座本身，于是模型和用户的交互都是围绕牌意，对话变成了牌意的学习环节，最终用户的感受是，这牌意看似很准，内容很满，但是都是空话。科学的流程应该是让模型借助塔罗，星座这两面镜子，回归问卜者身上，带着问卜者一起去探索，找到自己的答案，所以这个流程是需要互动交换的，而不是模型单方面的输出。本产品针对用户和模型的互动做了专门的设计。

2. 占卜中度的把控，优秀的占卜师都有一个共同的特质，就是让问卜者感觉精准，这种精准不是模糊笼统的说法带来的，而是经验和牌意的精准结合。在agent实现中，从3个维度把控AI输出精准的内容。
- 占卜师能获取问卜者的基本个人(年龄性别星座mbti)信息；
- 通过占卜记事本保留的长期记忆，做出合适的解读。
- 结合星座/星盘分析问卜者背后的行为模式
- 通过提示词让AI不止停留在牌意本身，给出落到人身上的回答

3. 有节奏的输出，市场上大部分产品都会一次性把所有解读输出，没有留给用户交互的余地，占卜绝对不应该是完全的单向输出，而是交流的过程。单向的输出最坏的结果就是用户看到AI回答了一大篇的内容和自身的情况完全不同（基本的身份/人生阶段错乱），直接退出不再使用。在agent的实现过程中特别关注AI的每次输出内容都是轻盈的，不仅能降低用户的阅读负荷感，也能加强用户的情感链接。从用户的反馈中得到更多的信息，不仅能为后续的回答做好背景铺垫，也能为下次占卜增加背景内容。
**产品价值**：相比模板化解读，本产品更强调过程参与感和决策支持，满足用户“被陪伴、一起思考”的需求。避免一次性倒出所有观点，让问卜者真正参与进来

### 丰富的占卜体验

1. 设计了两个风格不同的占卜agent，满足用户不同的需求，模拟不同性格的占卜师。在语气、话术节奏和解读风格上对两位虚拟占卜师做了差异化设定，如一位更柔和轻松，一位更直接。在和占卜师的交流中，“直接型”的占卜师比“委婉型”的要多，往往初次接触占卜的人群会倾向于委婉型的，但往往抓住人心的是那些“不留情面的”占卜师，问卜者总会选择性记住被直接命中的“话语”。
2. 星座和塔罗牌结合的方式解读，虽然入口仍作区分，但是解读却没有严格限制，很大程度上丰富用户体验，提高使用质量。用户不需要关心每种玄学工具的有效范围，不用了解什么样的问题应该选择什么工具。从设计理念上看，统一入口更能发挥模型能力，在这个层面上还细分模型，是一种限制
**产品价值**：降低玄学知识门槛，丰富用户的占卜体验感，对AI解读能力的补强

### 沉浸式的占卜体验

1. 降低输入摩擦，设计预输入。预输入没有通过模型实现猜你会问的动态预测效果，而是采用更简单直接的硬编码方式。一是大多数用户的问题都相似，用模型实现代价太大，二是这种方式后期维护运营方便，可以随时变化
2. 有参与感的抽牌体验，用户直观感受到洗牌，抽牌的过程，并直接参与其中
3. 低进入门槛，使用门槛极低，游客身份不需要输入任何个人信息即可开始使用。关键的个人信息（出生信息）允许在占卜过程中有需要时AI发起补充信息。降低冷启动阻力
4. 完全由AI控制的占卜节奏，市场上大部分产品是预设常问问题，指定牌阵，AI只负责解读。如果问题模糊，或者问题根本不适合使用塔罗牌解答，占卜体验会很差。占卜节奏完全交给AI的好处是，允许AI进一步澄清问题，选择合适的牌阵
**产品价值**：相比纯文本对话，营造出仪式感强化了用户情绪记忆。

---

## 3. 产品理念

### **占卜是占卜师用玄学工具让问卜者重新认识自己的过程**  
- 产品设计刻意反对在占卜过程中的单向输出，反对“把塔罗/星盘当成知识库讲解”的做法，反对为了追求“准确”而说空话，利用巴纳姆效应让问卜者觉得准，而是是让模型在和问卜者的多轮对话中，逐渐建立链接，焦点永远回归本人现阶段、情绪状态和真实困惑。  
- 具体在风格上通过引导式提问、结合个人的解读、以及对历史笔记的引用，帮助用户自己看到答案，而不是简单输出套话。

### **技术为情绪服务**  
- 从硬编码开场白，预设输入，几乎无摩擦的进入门槛，的目标都是将用户的使用成本降到最低。  
- 将塔罗抽牌，星盘解析，占卜笔记本封装成模型的 Function Calling，和 Memmory 机制让用户感觉和真正的占卜师对话。
- 模糊的玄学/心理学门槛，虽然产品表面上区分“塔罗”“星座”入口，但在解读过程中刻意不做“技术边界”的硬切割，允许 AI 自由组合使用塔罗和星盘。并计划在后续增加更多融合。对用户来说，不需要理解“哪种问题适合哪种工具”，只需“把生活问题说出来”，剩下交给系统判断。

---

## 4. 用户类型与核心使用场景(TODO)

在你给出的三类用户画像基础上，可以进一步明确代表场景：

- **1）什么都问型——高频陪伴用户**  
  - 特征：已经把产品当作“日常情绪与决策的出口”，恋爱、工作、人际、生活小事都会来问。  
  - 核心需求：稳定的熟悉的占卜师、记得自己过往经历,不需要每次重新解释背景。  
  - 对应设计：长期记忆笔记本、多轮追问流程、人格化的两个 Agent。

- **2）小白型——第一次接触占卜/星盘的新人**  
  - 特征：可能不了解塔罗和星盘的区别，只是“听说挺准、想试试”。  
  - 核心需求：门槛低、不会出错、有引导；不希望被专业术语吓退。  
  - 对应设计：游客零门槛、硬编码开场白、预设问题（Quick Replies）、统一入口下的工具自动选择。

- **3）头脑一热型——短期需求的“临时求助”用户**  
  - 特征：某个节点突然很焦虑（比如临近决定、感情挫折），希望快速获得一点安慰或视角。  
  - 核心需求：上手快、反馈及时、回答有情绪价值。  
  - 对应设计：快速开场（不依赖模型生成）、流式输出、抽牌仪式感、无需注册即可体验。

从增长角度看，本产品兼顾了“首次体验转化”（小白 & 一热型）与“持续留存”（什么都问型），长期记忆和人格化 AI 是支撑复访的关键抓手。

---

## 5. 未来盈利模式设想

在当前免费 / 试验阶段的基础上，可以围绕“情绪价值 + 记忆沉淀 + 仪式感”设计多层收费模型：

- **1）会员订阅制（基础变现主轴）**  
  - 免费层：保留核心占卜体验，但限制每日占卜次数、历史笔记保留时长。  
  - 会员层：解锁更长历史笔记留存、更高的每日对话上限、更完整的星盘解读、专属主题牌阵（如年度、季度复盘）。  
  - 高级层：提供每周/每月自动推送本周运势 + 与上次占卜对照”的专属报告。

- **2）一次性付费内容 / 主题套餐**  
  - 主题牌阵包：如“感情疗愈系列”“事业转折期系列”“年度复盘与新年愿望”等。  
  - 深度报告：基于星盘 + 历史笔记生成报告，可导出或打印，作为仪式感极强的“命盘档案”。（测测）
  - 特殊节日活动：情人节、生日、年末等节点的限时主题牌阵或活动。（cool）
  - 限定占卜师

- **3）个性化皮肤与装饰（轻度氪金）**  
  - 自定义牌面皮肤、抽牌桌布背景、占卜师头像与称号等虚拟物品。  
  - 允许用户通过连续使用或购买解锁，强化身份感与归属感。

- **5）数据与洞察衍生价值（需严格匿名与合规）**  
  - 在彻底匿名与合规前提下，对大量占卜笔记与问题进行聚合分析，产出趋势洞察（年轻人职场焦虑主题、感情问题模式等），用于内容选题或行业报告。  

上述模式可以分阶段上线：先做 **会员与主题内容**，在用户规模和产品心智稳定之后，再考虑虚拟物品和 B 端合作。

---

## 6. 技术特点（面向产品的解读）

结合你给出的“技术特点”列表以及当前架构，可以从产品视角总结为：

- **1）长期记忆占卜笔记本**  
  - 后端为每个用户维护独立的占卜笔记本文件，系统在对话退出后，通过定时任务延迟 12 小时生成占卜摘要，内容包括（问题、抽到的牌、阶段性结论、用户反馈）
  1. AI 可以随时调用“读取笔记本”工具，基于历史对话进行连续性解读，这在同类产品中是相对少见的“跨场次记忆能力”。
  2. 用户的背景信息无需重复收集，解读更精准，更贴合实际

- **2）Function Calling Agent Loop + 多工具协同**  
  - 使用 Gemini 的标准函数调用机制，把抽牌、查星盘、请求用户资料、读取笔记本统一抽象为工具。  
  - AI 根据语境主动决定何时调用哪个工具，并在工具结果返回后继续对话，形成闭环的 Agent Loop。  
  - 对用户而言，这是“一个懂你的人”的连续对话；对技术侧而言，则是高度可扩展的工具集。

- **3）流式输出与轻量前端架构**  
  - 后端采用 FastAPI + SSE 流式输出，前端使用原生 `ReadableStream` 解码，配合微动画呈现“打字机式”回答。  
  - 搭配 Zustand 做状态管理，整体架构轻量但足够灵活，便于后续做多端或埋点 A/B 等扩展。

- **4）100% AI 生成代码与 UI 设计的实践性尝试**  
  - 代码与界面设计高度依赖 AI 生成与迭代，团队主要角色更偏向“提出需求、评审结果、做关键决策”。  
  - 产品形态本身也成为 AI 开发工作流的一次实战样本：从复杂的 Function Calling 到细节丰富的抽牌动效，均采用“AI 产出 + 人类调参”的方式完成。

- **5）抽牌与视觉交互的精细设计**  
  - 抽牌器不仅实现了“洗牌—展开—选牌”的完整过程，还在洗牌轨迹、牌阵布局、进度指示器等细节上进行了多轮迭代。  
  - 这使得抽牌过程本身成为一个独立的“体验产品”，而不仅仅是工具调用前的过场。

---

## 7. 演进路径与阶段性收获

回顾 `update_log.md` 中的演进记录，可以看到产品大致经历了以下几个关键阶段：

- **1）从单一塔罗对话到星盘功能上线**  
  - 先完成塔罗占卜的基础闭环（抽牌 + 解读），随后集成外部星盘 API，引入星座 / 星盘解读场景。  
  - 在产品层面实现了“同一产品下的两条主线”，为后续跨工具解读奠定基础。

- **2）从规则解析到标准 Agent Loop 架构**  
  - 早期通过自定义标签解析抽牌、获取星盘等指令，后来全面迁移到标准 Function Calling Agent Loop。  
  - 这个过程显著提升了工具扩展性，也让“星盘 + 塔罗 + 资料补全 + 笔记本读取”等能力能够统一在一个决策框架下运作。

- **3）从即时摘要到“延迟 12 小时生成”的长期记忆机制**  
  - 初期在对话退出时立即生成占卜笔记，后续升级为通过持久化任务调度器延迟生成，既提升体验又降低成本。  
  - 这也标志着产品从“单次体验”走向“围绕用户生活轨迹的长期记录工具”。

- **4）从功能界面到沉浸式视觉体验**  
  - 前端经历了一次完整的视觉重构：从基础聊天界面升级到带有神秘背景、卡牌 UI、光效动画和人格化头像的整体体验。  
  - 用户对抽牌过程和对话场景的感知，从“工具”变成了“空间”和“仪式”。

从 PM 视角看，这条演进线索背后的共同原则是：**先确保体验闭环，再不断提升情绪价值与长期价值**。

---

## 8. 风险、边界与后续优化方向（产品视角）

- **1）责任与伦理边界**  
  - 必须持续在文案与 AI 提示词中强调：本产品不提供医疗、法律、投资等专业建议，只用于情绪陪伴与自我探索。  
  - 后续可以在设置与关键节点增加“风险提示”“紧急帮助渠道”等内容，避免用户对占卜结果过度依赖。

- **2）数据与隐私**  
  - 占卜笔记本、长期记忆等机制天然涉及用户隐私与情绪记录，需要明确告知存储范围、保留时长与删除机制。  
  - 建议长期引入更细粒度的“隐私模式”（不写入笔记、定期自动清空等）与数据导出/删除能力。

- **3）可持续性与成本控制**  
  - 由于大量依赖外部大模型与星盘 API，需在产品侧结合限额、订阅与分层功能，控制长期调用成本。  
  - 可以通过延迟生成、条件触发（如笔记本只记录满足一定条件的对话）等机制继续优化。

- **4）下一步值得投入的方向**  
  - 更体系化的“年度 / 季度复盘”产品化（结合长期记忆）。  
  - 引入轻量的“社交维度”（如可匿名分享一次占卜故事）。  
  - 在不增加复杂操作的前提下，为深度用户提供更多“自定义仪式感”：自定牌阵、自定主题日历等。

  语音输入

  从用户的对话中，进一步收集个人信息，过往占卜反馈（形成主动对话）

